"bundle";!function(){var a=System.amdDefine;a("app.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return"<template> <router-view></router-view> </template>"})}(),System.register("app.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("App",d=function(){function a(){c(this,a)}return a.prototype.configureRouter=function(a,b){a.map([{route:["","random"],name:"random",moduleId:"./random",nav:!0,title:"Random Grimoire"},{route:"card/:id",name:"card",moduleId:"./card",nav:!1,title:"Grimoire Card"}]),this.router=b},a}()),a("App",d)}}}),function(){var a=System.amdDefine;a("card.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <section class="au-animate"> <div> <h1 innerhtml.bind="title"></h1> </div> <div class="wrapper"> <div id="grim-img"> <img src="http://www.bungie.net${card.highResolution.image.sheetPath}"> </div> <div id="grim-text" data-bg-text="${themeName}"> <p innerhtml.bind="card.cardDescription"></p> <a route-href="route: random;"><i class="glyphicon glyphicon-link"></i><span>Show me a random card</span></a> </div> </div> </section> </template>'})}(),System.register("card.js",["aurelia-framework","aurelia-fetch-client"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient,f=a.json}],execute:function(){g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("CardView",(h=d(e),j=h(i=function(){function a(b){c(this,a),this.themes=null,this.card=null,this.cardName="",this.themeName="",this.http=null,this.id="",this.http=b}return a.prototype.activate=function(a){this.id=a.id},a.prototype.attached=function(){var a=this;this.http.fetch("data/grimoire.json").then(function(a){return a.json()}).then(function(b){for(var c=0;c<b.Response.themeCollection.length;c++)for(var d=b.Response.themeCollection[c],e=0;e<d.pageCollection.length;e++)for(var f=d.pageCollection[e],g=0;g<f.cardCollection.length;g++){var h=f.cardCollection[g];if(h.cardId==a.id){a.themeName=d.themeName,a.card=h,a.cardName=h.cardName,document.getElementById("body").className="color-"+h.rarity;break}}})["catch"](function(a){console.error(a)})},g(a,[{key:"title",get:function(){return this.themeName+" :: "+this.cardName}}]),a}())||i)),a("CardView",j)}}}),System.register("main.js",["fetch"],function(a,b){"use strict";return{setters:[function(a){}],execute:function(){function b(a){a.use.standardConfiguration().developmentLogging(),a.start().then(function(){return a.setRoot()})}a("configure",b)}}}),function(){var a=System.amdDefine;a("random.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <section class="au-animate"> <div> <h1 innerhtml.bind="title"></h1> </div> <div class="wrapper"> <div id="grim-img"> <img src="http://www.bungie.net${card.highResolution.image.sheetPath}"> </div> <div id="grim-text" data-bg-text="${themeName}"> <p innerhtml.bind="card.cardDescription"></p> <a route-href="route: card; params.bind: {id:card.cardId}"><i class="glyphicon glyphicon-link"></i><span>Permalink</span></a> </div> </div> <div id="progressBar"></div> </section> </template>'})}(),System.register("random.js",["progressbar.js","aurelia-framework","aurelia-fetch-client"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a["default"]},function(a){e=a.inject},function(a){f=a.HttpClient,g=a.json}],execute:function(){h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("RandomCardView",(i=e(f),k=i(j=function(){function a(b){c(this,a),this.themes=null,this.card=null,this.cardName="",this.themeName="",this.http=null,this.bar=null,this.http=b}return a.prototype.attached=function(){var a=this;this.http.fetch("data/grimoire.json").then(function(a){return a.json()}).then(function(b){a.themes=b.Response.themeCollection,a.updateCard()})["catch"](function(a){console.error(a)})},a.prototype.updateCard=function(){var a=this.themes[Math.floor(Math.random()*this.themes.length)];this.themeName=a.themeName;var b=a.pageCollection[Math.floor(Math.random()*a.pageCollection.length)];this.card=b.cardCollection[Math.floor(Math.random()*b.cardCollection.length)],this.cardName=this.card.cardName,document.getElementById("body").className="color-"+this.card.rarity;var c=this.card.cardDescription.split(" ").length/220*60;null!==this.bar&&this.bar.destroy(),this.bar=new d.Line(document.getElementById("progressBar"),{duration:1e3*c,color:"#e57373",trailColor:"#1565C0",svgStyle:{width:"100%",height:"100%"},from:{color:"#f44336"},to:{color:"#2196F3"},step:function(a,b){b.path.setAttribute("stroke",a.color)}}),this.bar.set(1),this.bar.animate(0);var e=this;setTimeout(function(){e.updateCard()},1e3*c)},h(a,[{key:"title",get:function(){return this.themeName+" :: "+this.cardName}}]),a}())||j)),a("RandomCardView",k)}}});