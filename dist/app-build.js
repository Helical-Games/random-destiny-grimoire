"bundle";!function(){var a=System.amdDefine;a("app.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return"<template> <router-view></router-view> </template>"})}(),System.register("app.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("App",d=function(){function a(){c(this,a)}return a.prototype.configureRouter=function(a,b){a.map([{route:["","random"],name:"random",moduleId:"./random",nav:!0,title:"Random Grimoire"},{route:"card/:id",name:"card",moduleId:"./card",nav:!1,title:"Grimoire Card"}]),this.router=b},a}()),a("App",d)}}}),function(){var a=System.amdDefine;a("card.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <section class="au-animate"> <md-colors md-primary-color="${color}"></md-colors> <div class="card-content container"> <div class="row"> <h1 innerhtml.bind="title"></h1> </div> <div class="row"> <div id="grim-img"> <img src="http://www.bungie.net${card.highResolution.image.sheetPath}"> </div> <div id="grim-text" data-bg-text="${themeName}"> <p innerhtml.bind="card.cardDescription"></p> </div> </div> </div> <div> <footer md-footer style="padding-left:0"> <div class="container"> <div class="row"> <a class="grey-text text-lighten-4 right" route-href="route: random;"><span class="octicon octicon-sync"></span> <span> New Random card</span></a> </div> </div> <div class="footer-copyright"> <div class="container"> <span>&copy; 2016 dave timmins</span> <a class="grey-text text-lighten-4 right" href="https://github.com/davetimmins/random-destiny-grimoire"><span class="octicon octicon-logo-github"></span></a> </div> </div> </footer> </div> </section> </template>'})}(),System.register("card.js",["aurelia-framework","aurelia-fetch-client"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient,f=a.json}],execute:function(){g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("CardView",(h=d(e),j=h(i=function(){function a(b){c(this,a),this.themes=null,this.card=null,this.cardName="",this.themeName="",this.http=null,this.id="",this.color="#c3c3c3",this.http=b}return a.prototype.activate=function(a){this.id=a.id},a.prototype.attached=function(){var a=this;this.http.fetch("data/grimoire.json").then(function(a){return a.json()}).then(function(b){for(var c=0;c<b.Response.themeCollection.length;c++)for(var d=b.Response.themeCollection[c],e=0;e<d.pageCollection.length;e++)for(var f=d.pageCollection[e],g=0;g<f.cardCollection.length;g++){var h=f.cardCollection[g];if(h.cardId==a.id){a.themeName=d.themeName,a.card=h,a.cardName=h.cardName,document.getElementById("body").className="color-"+h.rarity,1===h.rarity&&(a.color="#2196F3"),2===h.rarity&&(a.color="#4A148C"),3===h.rarity&&(a.color="#FF6F00");break}}})["catch"](function(a){console.error(a)})},g(a,[{key:"title",get:function(){return this.themeName+" :: "+this.cardName}}]),a}())||i)),a("CardView",j)}}}),System.register("main.js",["fetch"],function(a,b){"use strict";return{setters:[function(a){}],execute:function(){function b(a){a.use.standardConfiguration().developmentLogging().plugin("aurelia-materialize-bridge",function(a){return a.useColors().useFooter()}),a.start().then(function(){return a.setRoot()})}a("configure",b)}}}),function(){var a=System.amdDefine;a("random.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <section class="au-animate"> <md-colors md-primary-color="${color}"></md-colors> <div id="progressBar"></div> <div class="card-content container"> <div class="row"> <h1 innerhtml.bind="title"></h1> </div> <div class="row"> <div id="grim-img"> <img src="http://www.bungie.net${card.highResolution.image.sheetPath}"> </div> <div id="grim-text" data-bg-text="${themeName}"> <p innerhtml.bind="card.cardDescription"></p> </div> </div> </div> <div> <footer md-footer style="padding-left:0"> <div class="container"> <div class="row"> <a class="grey-text text-lighten-4 right" click.trigger="updateCard()"><span class="octicon octicon-sync"></span> New Random card</a> </div> <div class="row"> <a class="grey-text text-lighten-4 right" if.bind="card" route-href="route: card; params.bind: {id:card.cardId}"><span class="octicon octicon-link"></span><span> Permalink</span></a> </div> </div> <div class="footer-copyright"> <div class="container"> <span>&copy; 2016 dave timmins</span> <a class="grey-text text-lighten-4 right" href="https://github.com/davetimmins/random-destiny-grimoire"><span class="octicon octicon-logo-github"></span></a> </div> </div> </footer> </div> </section> </template>'})}(),System.register("random.js",["progressbar.js","aurelia-framework","aurelia-fetch-client"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a["default"]},function(a){e=a.inject},function(a){f=a.HttpClient,g=a.json}],execute:function(){h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("RandomCardView",(i=e(f),k=i(j=function(){function a(b){c(this,a),this.themes=null,this.card=null,this.cardName="",this.themeName="",this.http=null,this.bar=null,this.color="#c3c3c3",this.http=b}return a.prototype.attached=function(){var a=this;this.http.fetch("data/grimoire.json").then(function(a){return a.json()}).then(function(b){a.themes=b.Response.themeCollection,a.updateCard()})["catch"](function(a){console.error(a)})},a.prototype.updateCard=function(){window.scrollTo(0,0);var a=this.themes[Math.floor(Math.random()*this.themes.length)];this.themeName=a.themeName;var b=a.pageCollection[Math.floor(Math.random()*a.pageCollection.length)];this.card=b.cardCollection[Math.floor(Math.random()*b.cardCollection.length)],this.cardName=this.card.cardName,document.getElementById("body").className="color-"+this.card.rarity;var c=Math.max(this.card.cardDescription.split(" ").length/220*60,8);null!==this.bar&&this.bar.destroy();var e="#2196F3";1===this.card.rarity&&(this.color="#2196F3"),2===this.card.rarity&&(this.color="#4A148C",e="#4A148C"),3===this.card.rarity&&(this.color="#FF6F00",e="#FF6F00"),this.bar=new d.Line(document.getElementById("progressBar"),{duration:1e3*c,color:"#f44336",trailColor:"#e9e9e9",svgStyle:{width:"100%",height:"100%"},from:{color:"#f44336"},to:{color:e},step:function(a,b){b.path.setAttribute("stroke",a.color)}}),this.bar.set(1);var f=this;this.bar.animate(0,{},function(){f.updateCard()})},a.prototype.detached=function(){null!==this.bar&&this.bar.destroy()},h(a,[{key:"title",get:function(){return this.themeName+" :: "+this.cardName}}]),a}())||j)),a("RandomCardView",k)}}});