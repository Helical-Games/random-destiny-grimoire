"bundle";!function(){var a=System.amdDefine;a("app.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return"<template> <router-view></router-view> </template>"})}(),System.register("app.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("App",d=function(){function a(){c(this,a)}return a.prototype.configureRouter=function(a,b){a.map([{route:["","random"],name:"random",moduleId:"./random",nav:!0,title:"Random Grimoire"},{route:"card/:id",name:"card",moduleId:"./card",nav:!1,title:"Grimoire Card"}]),this.router=b},a}()),a("App",d)}}}),function(){var a=System.amdDefine;a("card-detail.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template bindable="headingText, imageSrc, description"> <div class="content"> <div class="row col"> <h1 innerhtml.bind="headingText"></h1> </div> <div class="row"> <div class="col grim-img"> <img src="${imageSrc}" alt="grimoire card"> </div> <div class="col grim-text"> <p innerhtml.bind="description"></p> </div> </div> </div> </template>'})}(),function(){var a=System.amdDefine;a("card.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <require from="./card-detail.html"></require> <section class="au-animate"> <md-colors md-primary-color="${color}"></md-colors> <card-detail heading-text="${title}" image-src="https://www.bungie.net${card.highResolution.image.sheetPath}" description="${card.cardDescription}"></card-detail> <footer md-footer style="padding-left:0"> <div class="clear text-pad"> <a class="grey-text text-lighten-4 right" route-href="route: random;"><span class="octicon octicon-sync"></span> <span> show random card</span></a> </div> <div class="clear grey-text text-lighten-4 right text-pad extra-pad"> <span>share on</span> <a target="_blank" href="https://twitter.com/intent/tweet?text=Grimoire Card :: ${encodedCardName}&via=davetimmins&url=${shareHref}">Twitter</a> <span> or </span> <a target="_blank" href="https://facebook.com/sharer.php?u=${shareHref}">Facebook</a> </div> <div class="footer-copyright clear text-pad"> <a href="http://davetimmins.com">&copy; 2016 dave timmins</a> <a class="grey-text text-lighten-4 right" href="https://github.com/davetimmins/random-destiny-grimoire"><span class="octicon octicon-logo-github"></span></a> </div> </footer> </section> </template>'})}(),System.register("card.js",["aurelia-framework","aurelia-fetch-client"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient,f=a.json}],execute:function(){g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("CardView",(h=d(e),j=h(i=function(){function a(b){c(this,a),this.themes=null,this.card=null,this.cardName="",this.themeName="",this.http=null,this.id="",this.color="#c3c3c3",this.shareHref="",this.encodedCardName="",this.http=b}return a.prototype.activate=function(a){this.id=a.id},a.prototype.attached=function(){var a=this;this.http.fetch("data/grimoire.json").then(function(a){return a.json()}).then(function(b){for(var c=0;c<b.Response.themeCollection.length;c++)for(var d=b.Response.themeCollection[c],e=0;e<d.pageCollection.length;e++)for(var f=d.pageCollection[e],g=0;g<f.cardCollection.length;g++){var h=f.cardCollection[g];if(h.cardId==a.id){a.shareHref=encodeURIComponent(window.location.href),a.encodedCardName=encodeURIComponent(h.cardName),a.themeName=d.themeName,a.card=h,a.cardName=h.cardName,document.getElementById("body").className="color-"+h.rarity,1===h.rarity&&(a.color="#2196F3"),2===h.rarity&&(a.color="#673AB7"),3===h.rarity&&(a.color="#FF9800");break}}})["catch"](function(a){console.error(a)})},g(a,[{key:"title",get:function(){return this.themeName+" :: "+this.cardName}}]),a}())||i)),a("CardView",j)}}}),System.register("main.js",["fetch"],function(a,b){"use strict";return{setters:[function(a){}],execute:function(){function b(a){a.use.standardConfiguration().developmentLogging().plugin("aurelia-materialize-bridge",function(a){return a.useColors().useFooter()}),a.start().then(function(){return a.setRoot()})}a("configure",b)}}}),function(){var a=System.amdDefine;a("random.html!github:systemjs/plugin-text@0.0.3.js",[],function(){return'<template> <require from="./card-detail.html"></require> <section class="au-animate"> <md-colors md-primary-color="${color}"></md-colors> <div id="progressBar"></div> <div class="timerControl" click.trigger="toggleTimer()"> <span class="mega-octicon octicon-clock"></span> <span id="timerStop" class="mega-octicon octicon-circle-slash"></span> </div> <card-detail heading-text="${title}" image-src="https://www.bungie.net${card.highResolution.image.sheetPath}" description="${card.cardDescription}"></card-detail> <footer md-footer style="padding-left:0"> <div class="clear text-pad"> <a class="grey-text text-lighten-4 right" click.trigger="updateCard()"><span class="octicon octicon-sync"></span> new random card</a> </div> <div class="clear text-pad"> <a class="grey-text text-lighten-4 right" if.bind="card" route-href="route: card; params.bind: {id:card.cardId}"><span class="octicon octicon-link"></span><span> permalink</span></a> </div> <div class="clear grey-text text-lighten-4 right text-pad extra-pad"> <span>share on</span> <a target="_blank" href="https://twitter.com/intent/tweet?url=${shareHref}&text=Random Destiny Grimoire&via=davetimmins">Twitter</a> <span> or </span> <a target="_blank" href="https://facebook.com/sharer.php?u=${shareHref}">Facebook</a> </div> <div class="footer-copyright clear text-pad"> <a href="http://davetimmins.com">&copy; 2016 dave timmins</a> <a class="grey-text text-lighten-4 right" href="https://github.com/davetimmins/random-destiny-grimoire"><span class="octicon octicon-logo-github"></span></a> </div> </footer> </section> </template>'})}(),System.register("random.js",["progressbar.js","aurelia-framework","aurelia-fetch-client"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a["default"]},function(a){e=a.inject},function(a){f=a.HttpClient,g=a.json}],execute:function(){h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("RandomCardView",(i=e(f),k=i(j=function(){function a(b){c(this,a),this.themes=null,this.card=null,this.cardName="",this.themeName="",this.http=null,this.bar=null,this.color="#c3c3c3",this.shareHref=encodeURIComponent(window.location.href),this.timerPlaying=!0,this.http=b}return a.prototype.attached=function(){var a=this;localStorage.rdgTimerPlaying&&(this.timerPlaying="true"==localStorage.rdgTimerPlaying);localStorage.getItem("rdgTimerPlaying");this.http.fetch("data/grimoire.json").then(function(a){return a.json()}).then(function(b){a.themes=b.Response.themeCollection,a.updateCard()})["catch"](function(a){console.error(a)})},a.prototype.updateCard=function(){var a=this;window.scrollTo(0,0);var b=this.themes[Math.floor(Math.random()*this.themes.length)];this.themeName=b.themeName;var c=b.pageCollection[Math.floor(Math.random()*b.pageCollection.length)];this.card=c.cardCollection[Math.floor(Math.random()*c.cardCollection.length)],this.cardName=this.card.cardName,document.getElementById("body").className="color-"+this.card.rarity;var e=Math.max(this.card.cardDescription.split(" ").length/200*60,10);null!==this.bar&&this.bar.destroy();var f="#2196F3";1===this.card.rarity&&(this.color="#2196F3"),2===this.card.rarity&&(this.color="#673AB7",f="#673AB7"),3===this.card.rarity&&(this.color="#FF9800",f="#FF9800"),this.bar=new d.Line(document.getElementById("progressBar"),{duration:1e3*e,color:"#f44336",trailColor:"#e9e9e9",svgStyle:{width:"100%",height:"100%"},from:{color:"#f44336"},to:{color:f},step:function(a,b){b.path.setAttribute("stroke",a.color)}}),this.bar.set(1);var g=document.querySelector("#timerStop");this.timerPlaying?!function(){g.classList.add("hidden");var b=a;a.bar.animate(0,{},function(){b.updateCard()})}():g.classList.remove("hidden")},a.prototype.toggleTimer=function(){var a=this;this.timerPlaying=!this.timerPlaying,localStorage.setItem("rdgTimerPlaying",this.timerPlaying);var b=document.querySelector("#timerStop");this.timerPlaying===!0?(b.classList.add("hidden"),null!==this.bar&&!function(){var b=a;a.bar.animate(0,{duration:a.bar._opts.duration*a.bar.value()},function(){b.updateCard()})}()):(b.classList.remove("hidden"),null!==this.bar&&this.bar.stop())},a.prototype.detached=function(){null!==this.bar&&this.bar.destroy()},h(a,[{key:"title",get:function(){return this.themeName+" :: "+this.cardName}}]),a}())||j)),a("RandomCardView",k)}}});